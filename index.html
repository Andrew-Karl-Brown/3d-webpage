<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Webpage</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Google Sign-In -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- Styles -->
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
      font-family: Helvetica, Arial, sans-serif;
    }

    /* ---------- LOGIN OVERLAY ---------- */
    #loginbody {
      position: fixed;
      inset: 0;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    #loginCard {
      background: #fff;
      padding: 40px 50px;
      border-radius: 14px;
      text-align: center;
      box-shadow: 0 20px 50px rgba(0,0,0,0.15);
      width: 360px;
    }

    #appTitle {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 8px;
    }

    #loginCard h1 {
      margin: 10px 0;
      font-size: 26px;
    }

    #loginCard h2 {
      margin: 0 0 20px;
      font-size: 14px;
      font-weight: normal;
      color: #666;
    }

    /* ---------- LEGAL LINKS ---------- */
    #legal {
      position: fixed;
      top: 12px;
      right: 16px;
      font-size: 12px;
      z-index: 10;
    }

    #legal a {
      color: #555;
      text-decoration: none;
      margin-left: 10px;
    }

    #legal a:hover {
      text-decoration: underline;
    }

    /* ---------- THREE.JS UI ---------- */
    #info {
      position: absolute;
      top: 10px;
      width: 100%;
      text-align: center;
      color: #8ff;
      z-index: 1;
    }

    #container {
      position: absolute;
      inset: 0;
    }

    #menu {
      position: absolute;
      bottom: 20px;
      width: 100%;
      text-align: center;
      z-index: 1;
    }

    button {
      background: transparent;
      border: 1px solid rgba(127,255,255,0.75);
      color: rgba(127,255,255,0.75);
      padding: 6px 12px;
      margin: 0 4px;
      cursor: pointer;
    }

    button:hover {
      background: rgba(0,255,255,0.4);
      color: #000;
    }
  </style>

  <!-- THREE.JS IMPORT MAP -->
  <script type="importmap">
  {
    "imports": {
      "three": "./build/three.module.js",
      "three/addons/": "./examples/jsm/"
    }
  }
  </script>
</head>

<body>

  <!-- Legal -->
  <div id="legal">
    <a href="./privacy.html" target="_blank">Privacy Policy</a>
    <a href="./terms.html" target="_blank">Terms</a>
  </div>

  <!-- LOGIN -->
  <div id="loginbody">
    <div id="loginCard">
      <div id="appTitle">Webpage</div>
      <h1>Welcome</h1>
      <h2>Sign In With Google</h2>

      <div id="g_id_onload"
           data-client_id="YOUR_CLIENT_ID"
           data-callback="handleCredentialResponse">
      </div>

      <div class="g_id_signin"
           data-type="standard"
           data-size="large">
      </div>
    </div>
  </div>

  <!-- APP -->
  <div id="info">3D Visualization Demo</div>
  <div id="container"></div>
  <div id="menu">
    <button id="table">TABLE</button>
    <button id="sphere">SPHERE</button>
    <button id="helix">HELIX</button>
    <button id="grid">GRID</button>
  </div>

  <!-- MAIN SCRIPT -->
  <script type="module">
    import * as THREE from 'three';
    import { TrackballControls } from 'three/addons/controls/TrackballControls.js';
    import { CSS3DRenderer, CSS3DObject } from 'three/addons/renderers/CSS3DRenderer.js';
    import TWEEN from 'three/addons/libs/tween.module.js';

    // TODO: your existing Sheets + three.js logic stays here
    // IMPORTANT: do NOT put app elements inside loginbody

    window.handleCredentialResponse = async (response) => {
      console.log("Logged in");
      document.getElementById('loginbody').style.display = 'none';

      // Start your app AFTER login
      if (typeof init === 'function') init();
      if (typeof animate === 'function') animate();
    };
  </script>

</body>
</html>
